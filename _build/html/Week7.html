
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Week 7 &#8212; Social Graphs 2025</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week7';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Week8" href="Week8.html" />
    <link rel="prev" title="Week 6" href="Week6.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="How_To_Take_This_Class.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Social Graphs 2025 - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Social Graphs 2025 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="How_To_Take_This_Class.html">
                    How the class works!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="PythonBootcamp.html">Introduction to Python &amp; Jupyter Notebooks</a></li>

<li class="toctree-l1"><a class="reference internal" href="Week1.html">Week 1</a></li>


<li class="toctree-l1"><a class="reference internal" href="Week2.html">Week 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week3.html">Week 3</a></li>


<li class="toctree-l1"><a class="reference internal" href="Week4.html">Week 4</a></li>




<li class="toctree-l1"><a class="reference internal" href="Week5.html">Week 5</a></li>



<li class="toctree-l1"><a class="reference internal" href="Week6.html">Week 6</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">Week 7</a></li>






<li class="toctree-l1"><a class="reference internal" href="Week8.html">Week8</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/suneman/socialgraphs2025nbs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/suneman/socialgraphs2025nbs/issues/new?title=Issue%20on%20page%20%2FWeek7.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Week7.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Week 7</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Week 7</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-processing-real-text-from-out-on-the-inter-webs">Part 1: Processing real text (from out on the inter-webs)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-community-detection">Part 2: Community detection</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-words-that-characterize-pages-or-groups-of-pages">Part 3: Words that characterize pages or groups of pages</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-4-visualization">Part 4: Visualization</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-5-understanding-tf-idf">Part 5: Understanding TF-IDF</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-6-genres-and-tf-idf-word-clouds">Part 6: Genres and TF-IDF word-clouds</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="week-7">
<h1>Week 7<a class="headerlink" href="#week-7" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This week’s curriculum focuses in figuring out (and visualizing) what’s special about a certain text (or collection of texts). We’ll also learn about community detection in networks (that’s how we’ll get our groups of text)</p>
<ul class="simple">
<li><p>Tricks for raw text (NLPP, Chapter 3).</p></li>
<li><p>Community Detection and info-boxes</p></li>
<li><p>Identifying important words in a document (TF-IDF)</p></li>
</ul>
<p>In the first part, we will take a quick tour of NLPP1e’s chapter 3, which is boring, super useful ressource. Then we’ll talk about how we can use simple statistics &amp; machine learning to get text to show us what it’s all about. We will even do a little visualization.</p>
<p>In the latter parts we will go back to network science, discussing community detection, mixing in some NLP, and trying it all out on our very own dataset.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="part-1-processing-real-text-from-out-on-the-inter-webs">
<h1>Part 1: Processing real text (from out on the inter-webs)<a class="headerlink" href="#part-1-processing-real-text-from-out-on-the-inter-webs" title="Link to this heading">#</a></h1>
<p>Ok. So Chapter 3 in NLPP is all about working with text from the real world. Getting text from this internet, cleaning it, tokenizing, modifying (e.g. stemming, converting to lower case, etc) to get the text in shape to work with the NLTK tools you’ve already learned about - and many more.</p>
<p>In the process we’ll learn more about regular expressions, as well as unicode; something we’ve already been struggling with a little bit will now be explained in more detail.</p>
<div class="alert alert-block alert-info">
One of the things that the LLMs have changed is how we don't have to suffer over regular expressions as much as in the old days. As I talk about in the video, regular expressions used to be a big, painful part of working with text. Nowadays, we can simply ask an LLM to help construct them ... and it tends to work really well. And regular expressions are not really important to know about - you need to know they exist so you can used them, but the details are not worth remembering. So this is one area where you can use LLMs as much as you like without a guilty conscience. (But remember to check and test the results thoroughly! The LLMs might still make mistakes.)
</div>
<blockquote>
<div><p><strong>Video lecture</strong>: Short overview of chapter 3 + a few words about kinds of language processing that we don’t address in this class.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">YouTubeVideo</span>
<span class="n">YouTubeVideo</span><span class="p">(</span><span class="s2">&quot;Rwakh-HXPJk&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="800"
            height="450"
            src="https://www.youtube.com/embed/Rwakh-HXPJk"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<blockquote>
<div><p><em>Reading</em>: NLPP Chapter 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.9, and 3.10. It’s not important that you go in depth with everything here - the key think is that you <em>know that Chapter 3 of this book exists</em>, and that it’s a great place to return to if you’re ever in need of an explanation of regular expressions, unicode, or other topics that you forget as soon as you stop using them (and don’t worry, I forget about those things too).</p>
</div></blockquote>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="part-2-community-detection">
<h1>Part 2: Community detection<a class="headerlink" href="#part-2-community-detection" title="Link to this heading">#</a></h1>
<p>Let’s begin by watching a lecture to learn about communities. If you want all the details, I recommend you take a look at <em>Chapter 9</em> in the <em>Network Science</em> book … but the video lecture below should be enough to get you started.</p>
<p><strong>Note</strong>: For this and the next exercise, work on the <em>undirected</em> version of the network.</p>
<blockquote>
<div><p><strong><em>Video Lecture</em></strong>: Communities in networks.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s2">&quot;FSRoqXw28RI&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">)</span>

<span class="c1"># direct youtube link: https://www.youtube.com/watch?v=FSRoqXw28RI</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="800"
            height="450"
            src="https://www.youtube.com/embed/FSRoqXw28RI"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<p>Before we get started on <em>network</em> communities, we’ll grab some information on a different kind of communities based on information from Wikipedia. Specifically, the <code class="docutils literal notranslate"><span class="pre">infoboxes</span></code>. An infobox is the little box usually displayed on the right when you open an artist’s page.</p>
<p>For example if you open the page for <a class="reference external" href="https://en.wikipedia.org/wiki/The_Rolling_Stones">The Rolling Stones</a>, you’ll see that it contains info about their place of <em><strong>origin</strong></em>, the <em><strong>genre</strong></em>s of music they’ve been associated with (in the case of the Stones it’s <code class="docutils literal notranslate"><span class="pre">rock</span></code>, <code class="docutils literal notranslate"><span class="pre">pop</span></code> and <code class="docutils literal notranslate"><span class="pre">blues</span></code>), their <em><strong>year’s active</strong></em>, the record <em><strong>labels</strong></em> they’ve signed with over time, etc. All really interesting information if we want to understand the network of artists.</p>
<p>So let’s start with an exercise designed to give you a sense of how good the LLMs are at the whole text-parsing thing.</p>
<p><em>Exercise</em>: Go nuts with an LLM and get all the genres for the nodes in your network</p>
<blockquote>
<div><ul class="simple">
<li><p>Yes, I’m serious. For this one I’d like you to fire up your most powerful thinking model you have access to and get it to write a script to extract genre for all nodes in your network. Some notes to help you</p>
<ul>
<li><p>If the node doesn’t have an <code class="docutils literal notranslate"><span class="pre">infobox</span></code> (or if a node’s infobox doesn’t have a <code class="docutils literal notranslate"><span class="pre">genre</span></code> it it), just don’t assign that node a genre and ignore it in the downstream analysis</p></li>
<li><p>Remember to lowercase all genres, also consider simplifying things by mapping <code class="docutils literal notranslate"><span class="pre">rock'n'roll</span></code>, <code class="docutils literal notranslate"><span class="pre">rock</span> <span class="pre">&amp;</span> <span class="pre">roll</span></code>, etc to a single genre.</p></li>
<li><p>Remember to test your algorithm well before emplying it, since you’re not writing the code yourself, you need to work harder to prove to yourself that it’s actually doing what you think it’s doing. You should inspect the code to understand what it’s actually doing and also test it on the strangest edge-cases you can find. (Can it handle, “The Animals”, for example).</p></li>
<li><p>The output should be a dictionary mapping artist names to lists of genres (since most artists have multiple genres listed).</p></li>
</ul>
</li>
<li><p>Report the following stats</p>
<ul>
<li><p>The number of nodes for which you could find genres</p></li>
<li><p>The average number of genres per node</p></li>
<li><p>The total number of distinct genres</p></li>
<li><p>A histogram showing artist counts for the top 15 genres</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
LLMs all the way for this one. 
</div><p>Now that we have the genres, let’s use them - and see how community-like the community is, if we consider the genres to be community labels.</p>
<p><em>Exercise</em>: Use the concept of modularity to explore how <em>community-like</em> the genres are.</p>
<blockquote>
<div><ul class="simple">
<li><p>Explain the concept of modularity in your own words.</p></li>
<li><p>Work from the undirected version of the network, keeping only the nodes for which you have genre information.</p></li>
<li><p>Now create your own partition of the network into genres.</p>
<ul>
<li><p><strong>Each node is simply characterized by the <em>first genre</em> in its list of genres</strong>.</p></li>
<li><p>Each community is the group of nodes that share the same genre.</p></li>
<li><p>That’s all you need, now calculate the modularity of this division of the network into genres.</p></li>
<li><p><strong>Note</strong>: Modularity is described in the <em>Network Science</em> book, section 9.4.. Thus, use <strong>equation 9.12</strong> in the book to calculate the modularity <span class="math notranslate nohighlight">\(M\)</span> of the partition described above. Are the genres good communities?</p></li>
</ul>
</li>
<li><p>Thinking a bit about the underlying data, a potential issue is the following: Many artists have the genre <code class="docutils literal notranslate"><span class="pre">rock</span></code> as their first genre in the list (since we started from a list of <code class="docutils literal notranslate"><span class="pre">rock</span></code> bands). So if <code class="docutils literal notranslate"><span class="pre">rock</span></code> is a big community, the network won’t have very high modularity.</p>
<ul>
<li><p>What happens to the modularity if you use a random genre from the list genre as the node-label for those nodes with more than one genre listed?</p></li>
</ul>
</li>
<li><p>Discuss your findings - and decide how you want to settle on a single genre for each band.</p></li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
Overall, it's OK to use an LLM to help with the code here. But do write your own explanation of modularity, and do try to implement a modularity on your own from eq 9.12 in the book.
</div><p><em>Exercise</em>: Community detection to find <strong>structral communities</strong> in the network</p>
<blockquote>
<div><ul class="simple">
<li><p>Again, work only with the subnetwork of nodes that have at least one genre.</p></li>
<li><p>Use <a class="reference external" href="https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.community.louvain.louvain_communities.html">the Louvain-algorithm</a> to find communities for the network. Report the value of modularity found by the algorithm.</p>
<ul>
<li><p><strong>Note</strong>: You can also try the <em>Infomap</em> algorithm instead if you’re curious. Go to <a class="reference external" href="http://www.mapequation.org/code.html">http://www.mapequation.org/code.html</a> and search for ‘python’. It’s harder to install, but a better community detection algorithm.</p></li>
</ul>
</li>
<li><p>What is the modularity of this partitioning of the network? Is it more community-like than the genres? What does this comparison reveal about the communities?</p></li>
<li><p>Visualize the network, using the Force Atlas algorithm.</p>
<ul>
<li><p>This time assign each node a different color based on its structural <em>community</em>.</p></li>
<li><p><strong>Note</strong>: If there’s a lot of small communities, it’s OK to only color the 5-10 largest communities (you can make the remaing nodes light gray or some netural color)</p></li>
<li><p>Describe the structure you observe.</p></li>
</ul>
</li>
<li><p>Keep using the community labels from above, but now visualize only the backbone-edges from your favorite network backbone from last week. Do the community correspond to the backbone structure you detected?</p></li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
It's OK to use an LLM to help with the code here. 
</div><p>Ok, now in this final community exercise, we want to check if the genres align with the communities.</p>
<blockquote>
<div><p><em>Exercise</em>: Communities versus genres.</p>
<ul class="simple">
<li><p>Compare the communities found by your algorithm with the music genres by creating a matrix <span class="math notranslate nohighlight">\(D\)</span> with dimension (<span class="math notranslate nohighlight">\(G \times C\)</span>), where G is the 7 most common genres and C is the 7 most common communities. We set entry <span class="math notranslate nohighlight">\(D(i,j)\)</span> to be the number of nodes that genre <span class="math notranslate nohighlight">\(i\)</span> has in common with community <span class="math notranslate nohighlight">\(j\)</span>. The matrix <span class="math notranslate nohighlight">\(D\)</span> is what we call a confusion matrix.</p></li>
<li><p>Use the confusion matrix to explain how well the communities you’ve detected correspond to the genres.</p>
<ul>
<li><p><strong>Note</strong>: This time, use all the genres associate with each node</p></li>
<li><p><strong>Note</strong>: If a node is not characterized by any of the 7 most popular genres, just ignore it.</p></li>
<li><p><strong>Note</strong>: If a node is not part of by any of the 7 largest communiteis, just ignore it.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
Again, you may use an LLM to help with the code for this assignment. The main thing is you get the D matrix right and interpret it.
</div></section>
<section class="tex2jax_ignore mathjax_ignore" id="part-3-words-that-characterize-pages-or-groups-of-pages">
<h1>Part 3: Words that characterize pages or groups of pages<a class="headerlink" href="#part-3-words-that-characterize-pages-or-groups-of-pages" title="Link to this heading">#</a></h1>
<p>Now, we’ll begin to play around with how far we can get with simple strategies for looking at text.</p>
<p>The video is basically just me talking about a fun paper, which shows you how little is needed in order to reveal something highly interesting about humans that produce text. But it’s important. Don’t miss this one!</p>
<blockquote>
<div><p><strong>Video lecture</strong>: Simple methods reveal a lot. I talk about the paper: <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0073791">Personality, Gender, and Age in the Language of Social Media: The Open-Vocabulary Approach</a>.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s2">&quot;wkYvdfkVmlI&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">)</span>

<span class="c1"># direct youtube link: https://www.youtube.com/watch?v=wkYvdfkVmlI</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="800"
            height="450"
            src="https://www.youtube.com/embed/wkYvdfkVmlI"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<p><em>Exercise</em>: Comparing in the different genres.</p>
<p><em>Setup</em>. You’ll need to go to your archives and find the wikipedia pages of all the rock artists.</p>
<p>Once you have the texts ready, you will want to aggregate the text into 15 long lists, one for each of the top 15 genres (let’s call them 15 <em>documents</em>). Each document contains on all the text in that genre (so for the rock genre it’s a looooong big doc). In each list, you should keep all the words (or <em>tokens</em> to be more precise) that occur on the pages, and a count of how frequently each word occurs. So the format should be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">word0</span> <span class="n">count0</span>
<span class="n">word1</span> <span class="n">count1</span>
<span class="n">word2</span> <span class="n">count2</span>

<span class="o">...</span>

<span class="n">wordN</span> <span class="n">countN</span>
</pre></div>
</div>
<p>This list is called a <em><strong>Term Frequency</strong></em> (or TF) list for each genre. Let’s build our own TF lists. Before you start counting, I am going to ask you do do a few things</p>
<blockquote>
<div><p><em>Action items</em></p>
<ul class="simple">
<li><p>Tokenize the pages into one long string per genre</p></li>
<li><p>Remove all punctuation from your list of tokens</p></li>
<li><p>Set everything to lower case</p></li>
<li><p>(Optional) Lemmatize your words</p></li>
<li><p>It’s a good idea to filter out rare words (e.g. words that only appear less than 5 times).</p></li>
</ul>
</div></blockquote>
<p>If you are confused by the instructions for cleaning, go back and have a look at Chapter 3 again. You need to use the tools from the book to clean the text.</p>
<blockquote>
<div><p><em>Action item</em>:</p>
<ul class="simple">
<li><p>Create your TF list for each of the 15 most popular genres.</p></li>
<li><p>List the top 15 words for each genre.</p></li>
<li><p>Comment on the top 15 words for each genre.</p></li>
</ul>
</div></blockquote>
<p><strong>Note</strong>: Above you (once again) have to deal with the fact that many artists have multiple genres listed. Pick the method you like the best to deal with this. Some possible choices</p>
<ul class="simple">
<li><p>Counting each page multiple times, so a page counts once per genre that’s listed</p></li>
<li><p>Picking the first genre listed</p></li>
<li><p>Picking the second genre listed</p></li>
<li><p>Picking a random genre</p></li>
<li><p>(… any other heuristic you like, e.g. using an api to ask an LLM to pick the genre that best describes the page from its list)</p></li>
</ul>
<div class="alert alert-block alert-info">
It's OK to use an LLM to help with the code here, but write your own comments.
</div></section>
<section class="tex2jax_ignore mathjax_ignore" id="part-4-visualization">
<h1>Part 4: Visualization<a class="headerlink" href="#part-4-visualization" title="Link to this heading">#</a></h1>
<p><strong>Step 1: Install the software</strong></p>
<p>First you must set up your system. The most difficult thing about creating the wordcloud is installing the <code class="docutils literal notranslate"><span class="pre">WordCloud</span></code> module. It’s available on GitHub, check out the page <a class="reference external" href="https://github.com/amueller/word_cloud"><strong>here</strong></a>.</p>
<p>You should be able to simply install using conda (and all dependencies, etc will be automatically fixed):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge wordcloud
</pre></div>
</div>
<p>If you can’t get that to work, there is more info on the GitHub page</p>
<ul class="simple">
<li><p>On my system, the module needed the <code class="docutils literal notranslate"><span class="pre">gcc</span></code> compiler installed. If you’re not already a programmer, you may have to install that. On Mac you get it by installing the <a class="reference external" href="http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/"><em>command line tools</em></a>. On linux, it’s probably already installed. And on Windows I’m not sure, but we’ll figure it out during the exercises.</p></li>
<li><p>Once that’s all set up, you can use <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install the <code class="docutils literal notranslate"><span class="pre">WordCloud</span></code> library, as <a class="reference external" href="https://github.com/amueller/word_cloud">detailed on the GitHub page</a>. But don’t forget to use Anaconda’s <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p></li>
<li><p>There are examples of how to use the module online, see <a class="reference external" href="http://sebastianraschka.com/Articles/2014_twitter_wordcloud.html">this page</a> for a nice example. If you’re interested, you can read about how the package was put together - and how it works <a class="reference external" href="http://peekaboo-vision.blogspot.dk/2012/11/a-wordcloud-in-python.html">here</a>.</p></li>
</ul>
<p><strong>Step 2: Draw some wordclouds</strong></p>
<blockquote>
<div><p><em>Action items</em></p>
<ul class="simple">
<li><p>Get your lists ready for the word-cloud software</p>
<ul>
<li><p>The package needs a single string to work on. The way that I converted my lists to a string was to simply combine all words together in one long string (separated by spaces), repeating each word according to its count.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">wordcloud</span></code> package looks for collocations in real texts, which is a problem when you make the list as above. The recommended fix is to simply set <code class="docutils literal notranslate"><span class="pre">collocations</span> <span class="pre">=</span> <span class="pre">False</span></code> as an option when you run the package.</p></li>
</ul>
</li>
<li><p>Now, create a word-cloud for each genre. Feel free to make it as fancy or non-fancy as you like. Comment on the results. (If you’d like, you can remove stopwords and wiki-syntax - I did a bit of that for my own wordclouds.)</p></li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
As above, it's OK to use an LLM to help get the code going. But write your own answers to the questions.
</div></section>
<section class="tex2jax_ignore mathjax_ignore" id="part-5-understanding-tf-idf">
<h1>Part 5: Understanding TF-IDF<a class="headerlink" href="#part-5-understanding-tf-idf" title="Link to this heading">#</a></h1>
<p>Now we jump back into the NLP work. In this last part, we’ll be creating word-clouds again. But this time, we’ll be using the method from the paper I discuss above: TF-IDF. Historically people have had a hard time grasping the idea behind TF-IDF, so here’s a little exercise designed to make you study it a bit more carefully.</p>
<p><em>Exercise 4</em>: Wrap your brain around TF-IDF</p>
<p>First, let’s learn about TF-IDF the way wikipedia explains it. Check out <a class="reference external" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">the wikipedia page for TF-IDF</a> and <em><strong>read the first part very carefully</strong></em>. The idea is that the term frequency doesn’t capture just what’s special about a text. It also only captures words that are just frequent in all text.</p>
<p>This is clear from the top counts in one of my lists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">of</span> 
<span class="ow">in</span> 
<span class="ow">and</span> 
<span class="n">the</span> 
<span class="n">to</span> 
<span class="n">a</span> 
<span class="ow">is</span>
<span class="n">by</span>
<span class="n">was</span>
<span class="k">as</span>
<span class="n">ref</span>
<span class="k">with</span>
<span class="n">first</span>
</pre></div>
</div>
<p>You can fix some of this by removing stop-words (as is described in the book), but it’s not enough. <em><strong>We want to pull out what’s special about a particular text.</strong></em></p>
<p>To focus on just what’s special, TF-IDF has two components: The <em>term frequency</em> (TF) and a <em>weight</em> (IDF). The weight draws on a larger corpus of text emphasize what’s special about the text we’re interested in.</p>
<p>Further, there are some extra things going on. For example, there are multiple definitions of TF on wikipedia. Above, we just looked at the raw counts.</p>
<blockquote>
<div><p><em>Action item</em></p>
<ul class="simple">
<li><p>Pick one of the alternative term frequency definitions. Explain why it might sometimes be prefereable to the raw count.</p></li>
</ul>
</div></blockquote>
<p>Now, let’s talk about the inverse document frequency.</p>
<blockquote>
<div><p><em>Action item</em></p>
<ul class="simple">
<li><p>What does IDF stand for? Answer in your own words.</p></li>
<li><p>How does IDF draw on a larger corpus to extract what’s special a certain text? Answer in your own words.</p></li>
</ul>
</div></blockquote>
<p>There are also multiple versions of IDF. Let’s think about those for a moment.</p>
<blockquote>
<div><p><em>Action items</em></p>
<ul class="simple">
<li><p>All of the IDF versions take the log of the calculated weight. Why do you think that is?</p></li>
<li><p>Explain why using IDF makes stopword removal less important.</p></li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
The point of this exercise is to understand TF-IDF. So if there are parts of the wikipedia page you don't understand, I encourage you to ask questions to an LLM to really understand the concept. Perhaps ask it to explain TF-IDF at the level of a high-school student. Once you've done that, then answer the questions in the action items on your own.
</div></section>
<section class="tex2jax_ignore mathjax_ignore" id="part-6-genres-and-tf-idf-word-clouds">
<h1>Part 6: Genres and TF-IDF word-clouds<a class="headerlink" href="#part-6-genres-and-tf-idf-word-clouds" title="Link to this heading">#</a></h1>
<p><strong>But wait a minute!</strong> Now we have all of the ingredients for a wonderful cocktail 😎</p>
<ul class="simple">
<li><p>We have genres - descriptions of related nodes in the network.</p></li>
<li><p>And you’re an expert on TF-IDF, so you can extract words that characterize a text relative to everything that’s going on.</p></li>
<li><p>Finally, you can create nice WordCouds!</p></li>
</ul>
<p>So let’s put it all together. Let’s use TF-IDF and wordcoulds to build a deeper understanding of the top communities.</p>
<p>Thus, the aim of this final part is to create genre wordclouds for the top 15 genres based on TF-IDF.</p>
<p>For each genre, create a single document for each community consisting of all the cleaned text from all members of the community. So in the end, you should have 15 documents in total.</p>
<p><em>Exercise</em>: Genre Word-clouds</p>
<blockquote>
<div><ul class="simple">
<li><p>Now that we have the community-texts, let’s start by grabbing the TF lists from the exercise above (you may modify to use whichever version of TF you like).</p></li>
<li><p>Next, calculate IDF for every word in every list (use whichever version of IDF you like).</p>
<ul>
<li><p>Which base logarithm did you use? Is that important?</p></li>
</ul>
</li>
<li><p>We’re now ready to calculate TF-IDFs. Do that for each genre.</p>
<ul>
<li><p>List the 10 top words for each genre accourding to TF-IDF. Are these 10 words more descriptive of the genre than just the TF? Justify your answer.</p></li>
</ul>
</li>
<li><p>Create a wordcloud for each genre.</p>
<ul>
<li><p><strong>Note</strong>: you may have to rescale the TF-IDF weights so they make sense to the wordcloud package. Write about this issue and how you solve it.</p></li>
</ul>
</li>
<li><p>Explain your creation. Do the wordclouds/TF-IDF lists enable you to understand the communities you have found (or is it just gibberish)? Justify your answer.</p></li>
</ul>
</div></blockquote>
<div class="alert alert-block alert-info">
Overall, it's OK to use an LLM to help with the code. But do write your own answers to the questions.
</div><p><em>Exercise</em>: Community Word-clouds</p>
<blockquote>
<div><ul class="simple">
<li><p>Redo the exercise above but for the 15 largest structural communities.</p></li>
<li><p>Do the word clouds seem more meaningful than for the genres? Optional: Add nuance to your answer by considering the confusion matrix <span class="math notranslate nohighlight">\(D\)</span> that you calculated above.</p></li>
</ul>
</div></blockquote>
<p>Note that this is a great way of characterizing the structural communities if you don’t have genre-labels (or other labels for that matter).</p>
<div class="alert alert-block alert-info">
Todays exercices are getting, long and involved so you can do whatever parts of this one that you like with LLMs. Maybe you can even get one to solve the whole exercise?
</div></section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Week6.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Week 6</p>
      </div>
    </a>
    <a class="right-next"
       href="Week8.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Week8</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Week 7</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-processing-real-text-from-out-on-the-inter-webs">Part 1: Processing real text (from out on the inter-webs)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-community-detection">Part 2: Community detection</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-words-that-characterize-pages-or-groups-of-pages">Part 3: Words that characterize pages or groups of pages</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-4-visualization">Part 4: Visualization</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-5-understanding-tf-idf">Part 5: Understanding TF-IDF</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#part-6-genres-and-tf-idf-word-clouds">Part 6: Genres and TF-IDF word-clouds</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sune Lehmann
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>